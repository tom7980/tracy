mod camera;
mod hittable;
mod ray;
mod sphere;
mod vec3;

use hittable::HittableList;
use sphere::Sphere;

use crate::camera::*;
use crate::hittable::*;
use crate::ray::*;
use crate::vec3::*;

fn main() {
    const ASPECT_RATIO: f64 = 16.0 / 9.0;
    const IMAGE_WIDTH: i64 = 1600;

    let mut world: HittableList = HittableList::new();

    world.add(Box::new(Sphere::new(Point3::new(0.0, 0.0, -1.0), 0.5)));
    world.add(Box::new(Sphere::new(
        Point3::new(0.0, -100.5, -100.0),
        100.0,
    )));

    if let Ok(mut cam) = Camera::new(ASPECT_RATIO, IMAGE_WIDTH, "./image.ppm") {
        cam.set_samples_per_pixel(150);
        cam.render(&world);
    };
}
